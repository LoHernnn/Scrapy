# Cryptocurrency Trading Bot & Analytics Dashboard

A comprehensive full-stack cryptocurrency trading and analysis platform combining automated trading strategies, real-time market data collection, Twitter sentiment analysis, and an interactive Next.js dashboard. This system integrates technical analysis, social sentiment scoring, and algorithmic trading with portfolio tracking. Please note: The trading bot is not yet effective. 

## Project Overview

This project provides an automated cryptocurrency analysis and trading system with real-time data visualization. It continuously collects market data from CoinGecko and Binance, analyzes social sentiment from Twitter, executes trading strategies based on multi-layered decision logic, and displays everything through a modern Next.js dashboard with interactive charts and real-time updates.

### What This Project Does

1. **Automated Market Data Collection**: Fetches cryptocurrency prices, technical indicators, and market metrics
2. **Multi-Source Integration**: Combines CoinGecko API, Binance futures data, and Twitter sentiment
3. **Advanced Technical Analysis**: Calculates RSI, MACD, EMA/SMA, Fibonacci retracements, pivot points, and volume analysis
4. **Twitter Sentiment Analysis**: Scrapes tweets from 100+ crypto influencers and analyzes sentiment using AI models
5. **Automated Trading Bot**: Executes trades based on technical signals, sentiment confirmation, and risk management
6. **Portfolio Tracking**: Real-time portfolio performance monitoring with PnL tracking
7. **Next.js Dashboard**: Modern, responsive web interface with server-side rendering
8. **Interactive Charts**: Visualize historical data with customizable technical indicators
9. **Real-time Updates**: Live market data and sentiment updates every 10-30 seconds

## Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        USER INTERFACE                           â”‚
â”‚              Next.js App (Port 3000) + API Routes               â”‚
â”‚     [Overview, Market, Crypto Details, Bot Dashboard]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ API Routes (/api/*)
                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    NEXT.JS API ROUTES                           â”‚
â”‚    /api/market, /api/crypto/[id], /api/history/[id],            â”‚
â”‚              /api/crypto/[id]/tweets , ...                      â”‚
â”‚                  (Direct PostgreSQL queries)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ SQL Queries (pg)
                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      POSTGRESQL DATABASE                       â”‚
â”‚  [cryptos, crypto_ranks, cyptos_data_base, cyptos_data_details,â”‚
â”‚   cyptos_data_binance, crypto_sentiment_scores, tweet_hash,    â”‚
â”‚   tweet_sentiments, tweet_crypto, crypto_scores,               â”‚
â”‚   crypto_trade_data, portfolio_performance]                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                  â”‚                  â”‚
           â†‘ Insert           â†‘ Insert           â†‘ Insert/Update
           â”‚                  â”‚                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Market Service  â”‚ â”‚ Sentiment Serviceâ”‚ â”‚   Trading Bot     â”‚
â”‚   (Python)        â”‚ â”‚    (Python)      â”‚ â”‚   (Python)        â”‚
â”‚                   â”‚ â”‚                  â”‚ â”‚                   â”‚
â”‚ CoinGecko API     â”‚ â”‚ Twitter Scraper  â”‚ â”‚ Signal Layer      â”‚
â”‚ Binance API       â”‚ â”‚ NLP Sentiment    â”‚ â”‚ Decision Layer    â”‚
â”‚ Technical Analysisâ”‚ â”‚ Fuzzy Matching   â”‚ â”‚ Risk Layer        â”‚
â”‚ Every 60min       â”‚ â”‚ Every 30min      â”‚ â”‚ Execution Layer   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ Project Structure

```
ScrapyTMP/
â”‚
â”œâ”€â”€ frontend/
â”‚   â””â”€â”€ scrapy-front-next/          # Next.js 16 Application
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ app/
â”‚       â”‚   â”‚   â”œâ”€â”€ page.js         # Overview page (market + hot tweets)
â”‚       â”‚   â”‚   â”œâ”€â”€ market/page.js  # Market explorer (all cryptos)
â”‚       â”‚   â”‚   â”œâ”€â”€ crypto/[id]/page.js  # Crypto detail page
â”‚       â”‚   â”‚   â”œâ”€â”€ bot/page.js     # Trading bot dashboard
â”‚       â”‚   â”‚   â”œâ”€â”€ api/
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ market/route.js     # Market data API
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ crypto/[id]/route.js
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ history/[id]/route.js
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ crypto/[id]/tweets/route.js
â”‚       â”‚   â”‚   â””â”€â”€ layout.js       # Root layout with sidebar
â”‚       â”‚   â”œâ”€â”€ components/
â”‚       â”‚   â”‚   â”œâ”€â”€ layout/Sidebar.jsx
â”‚       â”‚   â”‚   â”œâ”€â”€ ui/HotTweets.jsx
â”‚       â”‚   â”‚   â”œâ”€â”€ ui/SentimentSection.jsx
â”‚       â”‚   â”‚   â””â”€â”€ charts/MultiChart.jsx
â”‚       â”‚   â”œâ”€â”€ hooks/
â”‚       â”‚   â”‚   â””â”€â”€ useMarketData.js
â”‚       â”‚   â””â”€â”€ lib/
â”‚       â”‚       â””â”€â”€ db.js           # PostgreSQL connection
â”‚       â”œâ”€â”€ package.json
â”‚       â”œâ”€â”€ tailwind.config.js
â”‚       â””â”€â”€ next.config.js
â”‚
â”œâ”€â”€ scrapy/                         # Python core modules
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ settings.py             # Centralized configuration
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â””â”€â”€ database.py             # CryptoDatabase OOP class
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ logger.py               # Logging utilities
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â””â”€â”€ enums.py                # Enums (MarketRegime, LongShort)
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ coingecko_service.py
â”‚   â”‚   â”œâ”€â”€ binance_service.py
â”‚   â”‚   â””â”€â”€ technical_analysis_service.py
â”‚   â””â”€â”€ trading/                    # Trading bot modules
â”‚       â”œâ”€â”€ SignalLayer/            # Technical signals
â”‚       â”‚   â”œâ”€â”€ Technical_signal_scoring.py
â”‚       â”‚   â”œâ”€â”€ Market_detection_detection.py
â”‚       â”‚   â”œâ”€â”€ SentimentConfirmation.py
â”‚       â”‚   â””â”€â”€ Risk_filter.py
â”‚       â”œâ”€â”€ DecisionLayer/          # Entry/Exit logic
â”‚       â”‚   â”œâ”€â”€ Entry_logic.py
â”‚       â”‚   â”œâ”€â”€ Stop_tp_logic.py
â”‚       â”‚   â””â”€â”€ Trade_frequency_control.py
â”‚       â”œâ”€â”€ RiskLayer/              # Risk management
â”‚       â”‚   â”œâ”€â”€ Correlation_exposure.py
â”‚       â”‚   â”œâ”€â”€ Daily_loss_limit.py
â”‚       â”‚   â””â”€â”€ Max_drawdown_controle.py
â”‚       â””â”€â”€ ExecutionLayer/         # Order execution
â”‚           â””â”€â”€ Fees_model.py
â”‚
â”œâ”€â”€ scripts/                        # Python service scripts
â”‚   â”œâ”€â”€ crypto_market_service.py    # Market data collector (runs every 60min)
â”‚   â”œâ”€â”€ crypto_sentiment_service.py # Sentiment analyzer (runs every 30min)
â”‚   â”œâ”€â”€ crypto_trading_bot.py       # Trading bot (runs every 15min)
â”‚   â””â”€â”€ database_cleanup_utility.py # Database maintenance
â”‚
â”œâ”€â”€ html_output/                    # Scraped Twitter HTML (gitignored)
â””â”€â”€ README.MD                       # This file
```

## Complete Installation Guide

### Prerequisites

- **Python + dependence**: 3.10+
- **Node.js**: 18+
- **PostgreSQL**: 15+
- **Chrome/Chromium**: For Selenium web scraping
- **Git**: For cloning the repository

### Step 1: Clone Repository

```bash
git clone <repository-url>
cd ScrapyTMP
```

### Step 2: PostgreSQL Setup

#### Install PostgreSQL

**Windows**:
- Download from [postgresql.org](https://www.postgresql.org/download/windows/)
- Install with default settings
- Remember the postgres password

**Ubuntu/Debian**:
```bash
sudo apt update
sudo apt install postgresql postgresql-contrib
sudo systemctl start postgresql
```

**macOS**:
```bash
brew install postgresql@15
brew services start postgresql@15
```

#### Create Database and User

```bash
# Connect to PostgreSQL
psql -U postgres

# Create database and user
CREATE DATABASE crypto;
CREATE USER crypto WITH PASSWORD 'crypto';
GRANT ALL PRIVILEGES ON DATABASE crypto TO crypto;
\q
```

#### Configure Connection

Edit `scrapy/config/settings.py`:

```python
DB_CONFIG = {
    "host": "localhost",
    "port": 5432,
    "database": "crypto",
    "user": "crypto",
    "password": "crypto",
}
```

### Step 3: Python Backend Setup

#### Install Python Dependencies

```bash
# Install the scrapy package as a local editable library
pip install -e .

# This installs all required dependencies
```

#### Initialize Database Tables

```bash
python scripts/database_cleanup_utility.py
```

This creates all required tables. Check `scrapy/config/settings.py` for options:
- `CREATE_ALL_TABLES_IF_MISSING = True`
- `DROP_MARKET_DATA_TABLES = False`
- `DROP_SENTIMENT_DATA_TABLES = False`

### Step 4: Frontend Setup (Next.js)

```bash
cd frontend/scrapy-front-next

# Install dependencies
npm install

# Configure database connection in src/lib/db.js (should match Python config)
```

### Step 5: Configuration

Edit `scrapy/config/settings.py`

## ğŸ¯ Running the System

You need **four separate terminals**:

### Terminal 1: Market Data Collector

```bash
# Activate venv first
python scripts/crypto_market_service.py
```

Runs every **60 minutes**, collecting:
- Price, volume, market cap from CoinGecko
- Technical indicators (RSI, MACD, EMA, SMA, Fibonacci, Pivots)
- Binance futures data (funding rate, open interest)

### Terminal 2: Sentiment Analyzer

```bash
python scripts/crypto_sentiment_service.py
```

Runs every **30 minutes**, performing:
- Twitter scraping from 100+ influencers
- AI sentiment analysis using transformer models
- Crypto mention detection with fuzzy matching
- 12h and 24h sentiment score aggregation

### Terminal 3: Trading Bot (Optional)

```bash
python scripts/crypto_trading_bot.py
```

Runs every **15 minutes**, executing:
- Market regime detection (Trend/Range/Panic)
- Technical signal scoring (weighted indicators)
- Sentiment confirmation layer
- Position sizing with risk management
- Stop-loss and take-profit management
- Portfolio performance tracking

### Terminal 4: Next.js Dashboard

```bash
cd frontend/scrapy-front-next
npm run dev
```

Access at: `http://localhost:3000`

For mobile access on same network:
```bash
npm run dev -- -H 0.0.0.0
# Then access via: http://YOUR_LOCAL_IP:3000
```

## Dashboard

### Overview Page (`/`)

![Overview Dashboard](docs-images/Overview.png)

- **Market Table**: Real-time prices, 24h changes, sentiment scores
- **Top Gainers**: Top performing cryptos
- **Hot Tweets**: Latest tweets with extreme sentiment (|score| â‰¥ 0.7)
- **Sentiment Bars**: Visual sentiment strength indicators

### Market Explorer (`/market`)

![Market Explorer](docs-images/Market.png)

- **Comprehensive Cards**: All cryptos with full metrics
- **Technical Indicators**: RSI, MACD, SMA/EMA displayed inline
- **Performance Metrics**: 1D, 7D, 30D percentage changes
- **Real-time Updates**: Auto-refresh every 10 seconds

### Crypto Detail Page (`/crypto/[id]`)

![Crypto Analysis](docs-images/Analyse.png)

- **Multi-chart View**: Price history with customizable overlays
- **Technical Analysis**: indicators in detail
- **Recent Tweets**: tweets mentioning the crypto

### Sentiment Page (`/sentiment`)

![Sentiment Dashboard](docs-images/Sentiment.png)

- **Sentiment Overview**: Aggregated sentiment scores across all tracked cryptocurrencies

### Bot Dashboard (`/bot`)

![Trading Bot Dashboard](docs-images/Bot.png)

- **Portfolio Overview**: Total balance, free cash, unrealized PnL
- **Open Positions**: Current trades with entry/exit prices

## Trading Bot Architecture

### Layer 1: Signal Layer
- **Technical Signal Scoring**: Weighted scoring of RSI, MACD, EMA, SMA, volatility, pivots, Fibonacci
- **Market Detection**: Identifies Trend, Range, or Panic market regimes
- **Sentiment Confirmation**: Validates signals with Twitter sentiment
- **Risk Filter**: Pre-trade checks (daily loss, drawdown, correlation)

### Layer 2: Decision Layer
- **Entry Logic**: Combines technical + sentiment scores for long/short decisions
- **Position Sizing**: Dynamic sizing based on signal confidence and risk
- **Stop/TP Logic**: Multi-level take-profits (TP1: 50%, TP2: 30%, Runner: 20%)
- **Trade Frequency Control**: Prevents over-trading (min 60min between trades)

### Layer 3: Risk Layer
- **Daily Loss Limit**: Max 2% daily loss
- **Max Drawdown Control**: Max 20% drawdown from peak
- **Correlation Exposure**: Limits correlated positions

### Layer 4: Execution Layer
- **Fees Model**: Accounts for trading fees (0.5%)
- **Order Management**: Tracks entry, TP1, TP2, stop-loss, runner

## ğŸ“ Logging

Logs are stored in `logs/` directory.

## ğŸ“š Resources

- **Next.js Documentation**: https://nextjs.org/docs
- **CoinGecko API**: https://www.coingecko.com/api/documentation
- **Binance API**: https://binance-docs.github.io/apidocs/
- **Hugging Face Transformers**: https://huggingface.co/docs/transformers
- **TA-Lib**: https://mrjbq7.github.io/ta-lib/

## âš ï¸ Disclaimer

This project is for **educational purposes only**. 

- **Not financial advice**: Do not use this bot for real trading without thorough testing
- **Use at your own risk**: Cryptocurrency trading carries significant risk
- **No warranties**: The authors assume no liability for financial losses
- **Test first**: Always test with paper trading before using real capital

## ğŸ“„ License

Apache License 2.0 - Educational use only

